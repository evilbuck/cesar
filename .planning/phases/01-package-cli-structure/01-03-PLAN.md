---
phase: 01-package-cli-structure
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "pipx install . succeeds from project root"
    - "cesar command is globally available after pipx install"
    - "cesar transcribe <file> -o <output> works end-to-end"
    - "pipx uninstall cesar succeeds"
  artifacts: []
  key_links:
    - from: "pipx"
      to: "cesar command"
      via: "entry point installation"
      pattern: "cesar = cesar.cli:cli"
---

<objective>
Verify pipx installation works end-to-end

Purpose: Confirm the package is installable via pipx and the cesar command works globally
Output: Verified pipx installation and functional CLI
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-package-cli-structure/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Test pipx installation from local directory</name>
  <files>None (verification only)</files>
  <action>
    1. First uninstall any existing cesar package:
       pipx uninstall cesar 2>/dev/null || true
       pip uninstall cesar -y 2>/dev/null || true

    2. Install via pipx from project root:
       cd /home/buckleyrobinson/projects/cesar
       pipx install .

    3. Verify installation:
       which cesar  # Should show pipx path
       cesar --version  # Should show "cesar, version 1.0.0"
       cesar --help  # Should show command group help

    4. If installation fails, check:
       - pyproject.toml syntax is valid
       - Entry point is correctly defined
       - All dependencies are installable
  </action>
  <verify>
    which cesar
    cesar --version
  </verify>
  <done>
    - pipx install . succeeds
    - cesar command is available globally
    - cesar --version shows correct version
  </done>
</task>

<task type="auto">
  <name>Task 2: Test cesar transcribe command with real audio file</name>
  <files>None (verification only)</files>
  <action>
    1. Verify test audio file exists:
       ls assets/testing-file*  # Should show test audio file

    2. Create temp output directory:
       mkdir -p /tmp/cesar-test

    3. Run transcription with test file:
       cesar transcribe assets/testing-file.mp3 -o /tmp/cesar-test/output.txt

       If no test file exists at that path, check:
       ls assets/
       And use whatever audio file is available.

    4. Verify output was created:
       cat /tmp/cesar-test/output.txt

    5. Test help options work:
       cesar transcribe --help
       # Should show all options: --model, --device, --compute-type, --verbose, --quiet, etc.

    6. Clean up:
       rm -rf /tmp/cesar-test
  </action>
  <verify>
    cesar transcribe --help
    # Full transcription test depends on test file availability
  </verify>
  <done>
    - cesar transcribe --help shows all expected options
    - Transcription produces output file (if test audio available)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete pipx-installable cesar CLI with transcribe subcommand:
    - cesar --version shows version
    - cesar --help shows available commands
    - cesar transcribe --help shows transcribe options
    - cesar transcribe <file> -o <output> performs transcription
  </what-built>
  <how-to-verify>
    1. In a new terminal, run:
       cesar --version
       Expected: "cesar, version 1.0.0"

    2. Run:
       cesar --help
       Expected: Shows "Cesar: Offline audio transcription..." and available commands

    3. Run:
       cesar transcribe --help
       Expected: Shows INPUT_FILE argument and all options (--model, --output, etc.)

    4. (Optional) Test transcription with your own audio file:
       cesar transcribe /path/to/audio.mp3 -o /tmp/test.txt
       Expected: Transcription completes and output file is created
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues encountered</resume-signal>
</task>

</tasks>

<verification>
All commands must pass:

```bash
# Global installation
which cesar  # Shows pipx-installed path
cesar --version  # Shows "cesar, version 1.0.0"

# Help commands
cesar --help  # Shows command group help
cesar transcribe --help  # Shows transcribe options

# Cleanup
pipx uninstall cesar  # Clean uninstall (run after verification)
```
</verification>

<success_criteria>
1. pipx install . succeeds from project root
2. cesar command is globally available (in PATH)
3. cesar --version shows "cesar, version 1.0.0"
4. cesar --help shows available commands
5. cesar transcribe --help shows all transcribe options
6. cesar transcribe <file> -o <output> works (if test audio available)
7. Human verification confirms CLI works as expected
</success_criteria>

<output>
After completion, create `.planning/phases/01-package-cli-structure/01-03-SUMMARY.md`
</output>
